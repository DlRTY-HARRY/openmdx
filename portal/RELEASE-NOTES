Release Name: openMDX/Portal 2.4.0
Release Date: 2009-03-09

---------------------------------------------------------------------
Notes:

  This software is published under the BSD license
  as listed below.
  
  Copyright (c) 2006-2009, OMEX AG, Switzerland
  All rights reserved.
  
  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions 
  are met:
  
  * Redistributions of source code must retain the above copyright
    notice, this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in
    the documentation and/or other materials provided with the
    distribution.
  
  * Neither the name of OMEX AG nor the names of the contributors
    to openMDX may be used to endorse or promote products derived
    from this software without specific prior written permission.
  
  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND
  CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES,
  INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
  DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS
  BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
  TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
  DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
  ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
  OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
  OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  POSSIBILITY OF SUCH DAMAGE.
  
  ------------------
  
  This product includes software developed by the Apache Software
  Foundation (http://www.apache.org/). 

---------------------------------------------------------------------
Changes:

0.    SUMMARY
      * UI enhancements such as forms and mandatory input fields
      * Bug fixes
      * Performance improvements
                     
                        
1.    NEW FEATURES
      
      CR10008368
      Mandatory optional attributes. The tag <mandatory> allows to customize
      mandatory input fields. Example:
      
			<org.openmdx.ui1.ElementDefinition name="org:openmdx:example:workshop1:Member:name">
				<_object>
					<active>true</active>
					<mandatory>true</mandatory>
					<toolTip>
						<_item>Member name</_item>
					</toolTip>
					<label>
						<_item>Member name</_item>
					</label>
					<order>
						<_item>0</_item>
						<_item>0</_item>
						<_item>40</_item>
					</order>
				</_object>
				<_content/>
			</org.openmdx.ui1.ElementDefinition>      
			
			CR10008309
      Forms: allow to define forms which are composed from customized fields.
      A form consists of a set of field groups and a field group of a set
      of fields. A field definition is specified by the class name and
      feature name of a modeled, customized field and a field order. Below
      is a sample definition:
      
			<?xml version="1.0" encoding="UTF-8"?>
			<org.openmdx.base.Authority xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" name="org:openmdx:ui1" xsi:noNamespaceSchemaLocation="xri:+resource/org/openmdx/ui1/xmi/ui1.xsd">
			  <_object/>
			  <_content>
			    <provider>
			      <org.openmdx.base.Provider qualifiedName="MDX" _operation="null">
			        <_object/>
			        <_content>
			          <segment>
			            <org.openmdx.ui1.Segment qualifiedName="Root" _operation="null">
			              <_object/>
			              <_content>
						            <org.openmdx.ui1.FormDefinition name="ProductBasePriceForm">
						              <_object>
						                <title>
						                  <_item>Product Price</_item>
						                </title>
						                <toolTip>
						                  <_item>Product Price</_item>
						                </toolTip>
						              </_object>
						              <_content>
						                <formFieldGroupDefinition>
						                  <org.openmdx.ui1.FormFieldGroupDefinition name="ProductBasePriceInformation">
						                    <_object>
						                      <label>
						                        <_item>Product Price</_item>
						                      </label>
						                      <order>10</order>
						                      <columnBreakAtElement>
						                        <_item>4</_item>
						                        <_item>8</_item>
						                      </columnBreakAtElement>
						                    </_object>
						                    <_content>
						                      <formFieldDefinition>
						                        <org.openmdx.ui1.FormFieldDefinition id="usage">
						                          <_object>
						                            <forClass>org:opencrx:kernel:product1:AbstractProductPrice</forClass>
						                            <featureName>usage</featureName>
						                            <order>100</order>                            
						                          </_object>
						                          <_content />
						                        </org.openmdx.ui1.FormFieldDefinition>
						                        <org.openmdx.ui1.FormFieldDefinition id="priceLevel">
						                          <_object>
						                            <forClass>org:opencrx:kernel:product1:AbstractPriceLevel</forClass>
						                            <featureName>basedOn</featureName>
						                            <order>200</order>                            
						                          </_object>
						                          <_content />
						                        </org.openmdx.ui1.FormFieldDefinition>
						                        <org.openmdx.ui1.FormFieldDefinition id="price">
						                          <_object>
						                            <forClass>org:opencrx:kernel:product1:AbstractProductPrice</forClass>
						                            <featureName>price</featureName>
						                            <order>300</order>                            
						                          </_object>
						                          <_content />
						                        </org.openmdx.ui1.FormFieldDefinition>
						                        <org.openmdx.ui1.FormFieldDefinition id="quantityFrom">
						                          <_object>
						                            <forClass>org:opencrx:kernel:product1:AbstractProductPrice</forClass>
						                            <featureName>quantityFrom</featureName>
						                            <order>400</order>                            
						                          </_object>
						                          <_content />
						                        </org.openmdx.ui1.FormFieldDefinition>
						                        <org.openmdx.ui1.FormFieldDefinition id="quantityTo">
						                          <_object>
						                            <forClass>org:opencrx:kernel:product1:AbstractProductPrice</forClass>
						                            <featureName>quantityTo</featureName>
						                            <order>500</order>                            
						                          </_object>
						                          <_content />
						                        </org.openmdx.ui1.FormFieldDefinition>
						                        <org.openmdx.ui1.FormFieldDefinition id="discountIsPercentage">
						                          <_object>
						                            <forClass>org:opencrx:kernel:product1:AbstractProductPrice</forClass>
						                            <featureName>discountIsPercentage</featureName>
						                            <order>600</order>                            
						                          </_object>
						                          <_content />
						                        </org.openmdx.ui1.FormFieldDefinition>
						                        <org.openmdx.ui1.FormFieldDefinition id="discount">
						                          <_object>
						                            <forClass>org:opencrx:kernel:product1:AbstractProductPrice</forClass>
						                            <featureName>discount</featureName>
						                            <order>700</order>                            
						                          </_object>
						                          <_content />
						                        </org.openmdx.ui1.FormFieldDefinition>
						                      </formFieldDefinition>
						                    </_content>
						                  </org.openmdx.ui1.FormFieldGroupDefinition>
						                </formFieldGroupDefinition>
						              </_content>
						            </org.openmdx.ui1.FormDefinition>                       
						          </formDefinition>
			              </_content>
			            </org.openmdx.ui1.Segment>
			          </segment>
			        </_content>
			      </org.openmdx.base.Provider>
			    </provider>
			  </_content>
			</org.openmdx.base.Authority>
      
      The form can then be used in a wizard as follows:
      
			1. Get the form
			org.openmdx.ui1.jmi1.FormDefinition productBasePriceFormDefinition = app.getUiFormDefinition("ProductBasePriceForm");
			org.openmdx.portal.servlet.control.FormControl productBasePriceForm = new org.openmdx.portal.servlet.control.FormControl(
				formDefinition.refGetPath().getBase(),
				app.getCurrentLocaleAsString(),
				app.getCurrentLocaleAsIndex(),
				app.getUiContext(),
				productBasePriceFormDefinition
			);
			
			2. Read the fields from an HttpRequest into a field value map
			Map formValues = new HashMap();
			productBasePriceForm.updateObject(
				request.getParameterMap(),
				formValues,
				app,
				pm
			);
			
			3. Paint the form
			form.paint(
				p,
				null, // frame
				true // forEditing
			);
			p.flush();

			For more information and samples see the project www.opencrx.org.
						
      CR10006304
      Support for base and AdditionalElementDefinition in different grid panes.
      The order definition of an additional element definition allows to
      position a reference tab in grid panes. In addition additional element
      definitions can be marked as inactive.
      
      CR0003607
      Cannot disable additionalElementDefinition. Additional element
      definitions can be marked as inactive.
      
      CR0003539
      Ui perspectives. Perspectives allow to modify the Root UI customizing. 
      A perspective overrides the Root customizing, i.e. a perspective inherits 
      all UI element definitions from the Root customizing. The WEB-INF/config/ui 
      directory structure looks as follows:
      
      WEB-INF/config/ui
          Root
              locale 0
              locale 1
              ...
          {1-Perspective A}
              locale 0
              locale 1
              ...
          {2-Perspective B}
              locale 0
              locale 1
              ...
              
      The name of a Perspective must be of the form {order}-{name}, e.g.
      1-Guest, 2-BackOffice, 3-FrontOffice, 4-Mgmt. The order defines in
      which order the perspectives are rendered in the perspective selector
      in the GUI. Root has the predefined order 0.
      
      CR10008232
      DataBinding for composite objects. The data binding allows to map
      attributes of an inspector's composite objects. E.g. if Contact
      has Addresses as composite objects, the data binding allows to map
      attributes of composite address objects to the Contact's inspector.
      The composite object is specified by a query which must uniquely
      identify the composite. The query is specified by a semi-colon 
      separated list of name-value pairs. The names must match a query
      property name. The required property 'type' specifies the 
      composite's object class. The optional property 'id' allows to 
      select a composite with a predefined qualifier. Newly created
      composites are initialized with the query property values.
            
      Example:
      
      <!-- Add feature emailAddress to inspector org:opencrx:kernel:account1:Contact -->
			<featureDefinition>             
			  <org.openmdx.ui1.StructuralFeatureDefinition qualifiedName="org:opencrx:kernel:account1:Contact:address!emailAddress">
			  <_object>
			    <type>org:w3c:string</type>
			    <multiplicity>0..1</multiplicity>
			    <changeable>true</changeable>
			  </_object>
			  <_content/>
			  </org.openmdx.ui1.StructuralFeatureDefinition>
        ...
     
      <!-- Customize feature emailAddress -->
			<elementDefinition>
			  <org.openmdx.ui1.ElementDefinition name="org:opencrx:kernel:account1:Contact:address!emailAddress">
			  <_object>
			    <active>true</active>
			    <toolTip>
			    <_item>E-Mail (usage=400)</_item>
			    </toolTip>
			    <label>
			    <_item>E-Mail (usage=400)</_item>
			    </label>
			    <dataBindingName>org.openmdx.portal.servlet.databinding.CompositeObjectDataBinding?type=org:opencrx:kernel:account1:EMailAddress;usage=(short)400</dataBindingName>
			  </_object>
			  <_content/>
			  </org.openmdx.ui1.ElementDefinition>                
        ...
      
      CR10008230
      PortalExtension: callback for disabling controls. The callback 
      isEnabled(control, refObj, app) allows to disable controls, 
      e.g. attribute tabs or field groups.
                        
2.    CHANGES  
     
2.0.  CHANGED FEATURES
      none
      
            
2.1.  FIXED BUGS
      none

2.2.  DEPRECATED FEATURES
      none
            
2.3   REMOVED FEATURES
      none

---------------------------------------------------------------------
